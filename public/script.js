// Basic script logic for interaction
let cart = JSON.parse(localStorage.getItem('cart')||'[]');
function addToCart(product){ const existing = cart.find(i=>i.id===product.id); if(existing){ existing.quantity++; } else { cart.push({...product, quantity:1}); } localStorage.setItem('cart',JSON.stringify(cart)); alert('Added!'); }
if(window.location.pathname==='/' || window.location.pathname==='/index.html'){ fetch('/api/products').then(r=>r.json()).then(data=>{ document.getElementById('product-list').innerHTML = data.map(p=>`<div><h2>${p.name}</h2><p>${p.description}</p><p>$${p.price}</p><button onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button></div>`).join(''); }); }
if(window.location.pathname==='/cart'){ const c = document.getElementById('cart-items'); if(cart.length===0) c.innerHTML = 'Empty'; else c.innerHTML = cart.map(i=>`<div><h3>${i.name}</h3><p>Qty: ${i.quantity}</p></div>`).join(''); }
if(window.location.pathname==='/checkout'){ document.getElementById('checkout-form').addEventListener('submit', e=>{ e.preventDefault(); const f=e.target; fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({customer_name:f.name.value,customer_email:f.email.value,cart})}).then(r=>r.json()).then(data=>{ localStorage.removeItem('cart'); document.getElementById('checkout-status').innerText = `Order ID: ${data.orderId}`; }); }); }
if(window.location.pathname==='/admin'){ document.getElementById('add-product-form').addEventListener('submit', e=>{ e.preventDefault(); const f=e.target; fetch('/api/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:f.name.value,description:f.description.value,price:parseFloat(f.price.value),image:f.image.value})}).then(()=>{ alert('Added'); f.reset(); }); }); }